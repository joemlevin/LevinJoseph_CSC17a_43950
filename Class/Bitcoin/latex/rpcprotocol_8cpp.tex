\hypertarget{rpcprotocol_8cpp}{}\section{C\+:/\+Users/\+Joe/\+Documents/\+School/\+C\+S\+C17\+A/bitcoin/src/rpcprotocol.cpp File Reference}
\label{rpcprotocol_8cpp}\index{C\+:/\+Users/\+Joe/\+Documents/\+School/\+C\+S\+C17\+A/bitcoin/src/rpcprotocol.\+cpp@{C\+:/\+Users/\+Joe/\+Documents/\+School/\+C\+S\+C17\+A/bitcoin/src/rpcprotocol.\+cpp}}
{\ttfamily \#include \char`\"{}rpcprotocol.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}clientversion.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tinyformat.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}util.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}utilstrencodings.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}utiltime.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}version.\+h\char`\"{}}\\*
{\ttfamily \#include $<$stdint.\+h$>$}\\*
{\ttfamily \#include $<$boost/algorithm/string.\+hpp$>$}\\*
{\ttfamily \#include $<$boost/asio.\+hpp$>$}\\*
{\ttfamily \#include $<$boost/asio/ssl.\+hpp$>$}\\*
{\ttfamily \#include $<$boost/bind.\+hpp$>$}\\*
{\ttfamily \#include $<$boost/filesystem.\+hpp$>$}\\*
{\ttfamily \#include $<$boost/foreach.\+hpp$>$}\\*
{\ttfamily \#include $<$boost/iostreams/concepts.\+hpp$>$}\\*
{\ttfamily \#include $<$boost/iostreams/stream.\+hpp$>$}\\*
{\ttfamily \#include $<$boost/shared\+\_\+ptr.\+hpp$>$}\\*
{\ttfamily \#include \char`\"{}json/json\+\_\+spirit\+\_\+writer\+\_\+template.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
string \hyperlink{rpcprotocol_8cpp_af2d91e7026366657a021311ecc188262}{H\+T\+T\+P\+Post} (const string \&str\+Msg, const map$<$ string, string $>$ \&map\+Request\+Headers)
\item 
string \hyperlink{rpcprotocol_8cpp_a3873cbf174c1295f474d0ec79b8b677c}{H\+T\+T\+P\+Error} (int n\+Status, bool keepalive, bool headers\+Only)
\item 
string \hyperlink{rpcprotocol_8cpp_a062c0344c6ae13637fdc6f2fc44b5007}{H\+T\+T\+P\+Reply\+Header} (int n\+Status, bool keepalive, size\+\_\+t content\+Length, const char $\ast$content\+Type)
\item 
string \hyperlink{rpcprotocol_8cpp_ab53c17ac43829711f4567fc97feb6a62}{H\+T\+T\+P\+Reply} (int n\+Status, const string \&str\+Msg, bool keepalive, bool headers\+Only, const char $\ast$content\+Type)
\item 
bool \hyperlink{rpcprotocol_8cpp_add578b3fb095706a7a78d265fa97d8d0}{Read\+H\+T\+T\+P\+Request\+Line} (std\+::basic\+\_\+istream$<$ char $>$ \&stream, int \&proto, string \&http\+\_\+method, string \&http\+\_\+uri)
\item 
int \hyperlink{rpcprotocol_8cpp_af615c564cc7794d255e5adfacade4066}{Read\+H\+T\+T\+P\+Status} (std\+::basic\+\_\+istream$<$ char $>$ \&stream, int \&proto)
\item 
int \hyperlink{rpcprotocol_8cpp_adfa1ef30dd1e00dcbecff15e1161e369}{Read\+H\+T\+T\+P\+Headers} (std\+::basic\+\_\+istream$<$ char $>$ \&stream, map$<$ string, string $>$ \&map\+Headers\+Ret)
\item 
int \hyperlink{rpcprotocol_8cpp_a04ef20cccddfd1505806982c3c232325}{Read\+H\+T\+T\+P\+Message} (std\+::basic\+\_\+istream$<$ char $>$ \&stream, map$<$ string, string $>$ \&map\+Headers\+Ret, string \&str\+Message\+Ret, int n\+Proto, size\+\_\+t max\+\_\+size)
\item 
string \hyperlink{rpcprotocol_8cpp_ab409c39d9d803bb50fecd4f0ff9970a4}{J\+S\+O\+N\+R\+P\+C\+Request} (const string \&str\+Method, const Array \&params, const Value \&id)
\item 
Object \hyperlink{rpcprotocol_8cpp_a48add16ec902386cc873c5cf0b40b2dd}{J\+S\+O\+N\+R\+P\+C\+Reply\+Obj} (const Value \&result, const Value \&error, const Value \&id)
\item 
string \hyperlink{rpcprotocol_8cpp_a091e4839a15f5f6d569a97c709d80374}{J\+S\+O\+N\+R\+P\+C\+Reply} (const Value \&result, const Value \&error, const Value \&id)
\item 
Object \hyperlink{rpcprotocol_8cpp_a17b1bb111ab339efc951929834766039}{J\+S\+O\+N\+R\+P\+C\+Error} (int code, const string \&message)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const size\+\_\+t \hyperlink{rpcprotocol_8cpp_a86279189e9b67af153a80f6ca5ef5d1c}{P\+O\+S\+T\+\_\+\+R\+E\+A\+D\+\_\+\+S\+I\+Z\+E} = 256 $\ast$ 1024
\begin{DoxyCompactList}\small\item\em Number of bytes to allocate and read at most at once in post data. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{rpcprotocol_8cpp_a3873cbf174c1295f474d0ec79b8b677c}{}\index{rpcprotocol.\+cpp@{rpcprotocol.\+cpp}!H\+T\+T\+P\+Error@{H\+T\+T\+P\+Error}}
\index{H\+T\+T\+P\+Error@{H\+T\+T\+P\+Error}!rpcprotocol.\+cpp@{rpcprotocol.\+cpp}}
\subsubsection[{H\+T\+T\+P\+Error}]{\setlength{\rightskip}{0pt plus 5cm}string H\+T\+T\+P\+Error (
\begin{DoxyParamCaption}
\item[{int}]{n\+Status, }
\item[{bool}]{keepalive, }
\item[{bool}]{headers\+Only}
\end{DoxyParamCaption}
)}\label{rpcprotocol_8cpp_a3873cbf174c1295f474d0ec79b8b677c}
\hypertarget{rpcprotocol_8cpp_af2d91e7026366657a021311ecc188262}{}\index{rpcprotocol.\+cpp@{rpcprotocol.\+cpp}!H\+T\+T\+P\+Post@{H\+T\+T\+P\+Post}}
\index{H\+T\+T\+P\+Post@{H\+T\+T\+P\+Post}!rpcprotocol.\+cpp@{rpcprotocol.\+cpp}}
\subsubsection[{H\+T\+T\+P\+Post}]{\setlength{\rightskip}{0pt plus 5cm}string H\+T\+T\+P\+Post (
\begin{DoxyParamCaption}
\item[{const string \&}]{str\+Msg, }
\item[{const map$<$ string, string $>$ \&}]{map\+Request\+Headers}
\end{DoxyParamCaption}
)}\label{rpcprotocol_8cpp_af2d91e7026366657a021311ecc188262}
H\+T\+T\+P protocol

This ain\textquotesingle{}t Apache. We\textquotesingle{}re just using H\+T\+T\+P header for the length field and to be compatible with other J\+S\+O\+N-\/\+R\+P\+C implementations. \hypertarget{rpcprotocol_8cpp_ab53c17ac43829711f4567fc97feb6a62}{}\index{rpcprotocol.\+cpp@{rpcprotocol.\+cpp}!H\+T\+T\+P\+Reply@{H\+T\+T\+P\+Reply}}
\index{H\+T\+T\+P\+Reply@{H\+T\+T\+P\+Reply}!rpcprotocol.\+cpp@{rpcprotocol.\+cpp}}
\subsubsection[{H\+T\+T\+P\+Reply}]{\setlength{\rightskip}{0pt plus 5cm}string H\+T\+T\+P\+Reply (
\begin{DoxyParamCaption}
\item[{int}]{n\+Status, }
\item[{const string \&}]{str\+Msg, }
\item[{bool}]{keepalive, }
\item[{bool}]{headers\+Only, }
\item[{const char $\ast$}]{content\+Type}
\end{DoxyParamCaption}
)}\label{rpcprotocol_8cpp_ab53c17ac43829711f4567fc97feb6a62}
\hypertarget{rpcprotocol_8cpp_a062c0344c6ae13637fdc6f2fc44b5007}{}\index{rpcprotocol.\+cpp@{rpcprotocol.\+cpp}!H\+T\+T\+P\+Reply\+Header@{H\+T\+T\+P\+Reply\+Header}}
\index{H\+T\+T\+P\+Reply\+Header@{H\+T\+T\+P\+Reply\+Header}!rpcprotocol.\+cpp@{rpcprotocol.\+cpp}}
\subsubsection[{H\+T\+T\+P\+Reply\+Header}]{\setlength{\rightskip}{0pt plus 5cm}string H\+T\+T\+P\+Reply\+Header (
\begin{DoxyParamCaption}
\item[{int}]{n\+Status, }
\item[{bool}]{keepalive, }
\item[{size\+\_\+t}]{content\+Length, }
\item[{const char $\ast$}]{content\+Type}
\end{DoxyParamCaption}
)}\label{rpcprotocol_8cpp_a062c0344c6ae13637fdc6f2fc44b5007}
\hypertarget{rpcprotocol_8cpp_a17b1bb111ab339efc951929834766039}{}\index{rpcprotocol.\+cpp@{rpcprotocol.\+cpp}!J\+S\+O\+N\+R\+P\+C\+Error@{J\+S\+O\+N\+R\+P\+C\+Error}}
\index{J\+S\+O\+N\+R\+P\+C\+Error@{J\+S\+O\+N\+R\+P\+C\+Error}!rpcprotocol.\+cpp@{rpcprotocol.\+cpp}}
\subsubsection[{J\+S\+O\+N\+R\+P\+C\+Error}]{\setlength{\rightskip}{0pt plus 5cm}Object J\+S\+O\+N\+R\+P\+C\+Error (
\begin{DoxyParamCaption}
\item[{int}]{code, }
\item[{const string \&}]{message}
\end{DoxyParamCaption}
)}\label{rpcprotocol_8cpp_a17b1bb111ab339efc951929834766039}
\hypertarget{rpcprotocol_8cpp_a091e4839a15f5f6d569a97c709d80374}{}\index{rpcprotocol.\+cpp@{rpcprotocol.\+cpp}!J\+S\+O\+N\+R\+P\+C\+Reply@{J\+S\+O\+N\+R\+P\+C\+Reply}}
\index{J\+S\+O\+N\+R\+P\+C\+Reply@{J\+S\+O\+N\+R\+P\+C\+Reply}!rpcprotocol.\+cpp@{rpcprotocol.\+cpp}}
\subsubsection[{J\+S\+O\+N\+R\+P\+C\+Reply}]{\setlength{\rightskip}{0pt plus 5cm}string J\+S\+O\+N\+R\+P\+C\+Reply (
\begin{DoxyParamCaption}
\item[{const Value \&}]{result, }
\item[{const Value \&}]{error, }
\item[{const Value \&}]{id}
\end{DoxyParamCaption}
)}\label{rpcprotocol_8cpp_a091e4839a15f5f6d569a97c709d80374}
\hypertarget{rpcprotocol_8cpp_a48add16ec902386cc873c5cf0b40b2dd}{}\index{rpcprotocol.\+cpp@{rpcprotocol.\+cpp}!J\+S\+O\+N\+R\+P\+C\+Reply\+Obj@{J\+S\+O\+N\+R\+P\+C\+Reply\+Obj}}
\index{J\+S\+O\+N\+R\+P\+C\+Reply\+Obj@{J\+S\+O\+N\+R\+P\+C\+Reply\+Obj}!rpcprotocol.\+cpp@{rpcprotocol.\+cpp}}
\subsubsection[{J\+S\+O\+N\+R\+P\+C\+Reply\+Obj}]{\setlength{\rightskip}{0pt plus 5cm}Object J\+S\+O\+N\+R\+P\+C\+Reply\+Obj (
\begin{DoxyParamCaption}
\item[{const Value \&}]{result, }
\item[{const Value \&}]{error, }
\item[{const Value \&}]{id}
\end{DoxyParamCaption}
)}\label{rpcprotocol_8cpp_a48add16ec902386cc873c5cf0b40b2dd}
\hypertarget{rpcprotocol_8cpp_ab409c39d9d803bb50fecd4f0ff9970a4}{}\index{rpcprotocol.\+cpp@{rpcprotocol.\+cpp}!J\+S\+O\+N\+R\+P\+C\+Request@{J\+S\+O\+N\+R\+P\+C\+Request}}
\index{J\+S\+O\+N\+R\+P\+C\+Request@{J\+S\+O\+N\+R\+P\+C\+Request}!rpcprotocol.\+cpp@{rpcprotocol.\+cpp}}
\subsubsection[{J\+S\+O\+N\+R\+P\+C\+Request}]{\setlength{\rightskip}{0pt plus 5cm}string J\+S\+O\+N\+R\+P\+C\+Request (
\begin{DoxyParamCaption}
\item[{const string \&}]{str\+Method, }
\item[{const Array \&}]{params, }
\item[{const Value \&}]{id}
\end{DoxyParamCaption}
)}\label{rpcprotocol_8cpp_ab409c39d9d803bb50fecd4f0ff9970a4}
J\+S\+O\+N-\/\+R\+P\+C protocol. Bitcoin speaks version 1.\+0 for maximum compatibility, but uses J\+S\+O\+N-\/\+R\+P\+C 1.\+1/2.0 standards for parts of the 1.\+0 standard that were unspecified (H\+T\+T\+P errors and contents of \textquotesingle{}error\textquotesingle{}).

1.\+0 spec\+: \href{http://json-rpc.org/wiki/specification}{\tt http\+://json-\/rpc.\+org/wiki/specification} 1.\+2 spec\+: \href{http://jsonrpc.org/historical/json-rpc-over-http.html}{\tt http\+://jsonrpc.\+org/historical/json-\/rpc-\/over-\/http.\+html} \href{http://www.codeproject.com/KB/recipes/JSON_Spirit.aspx}{\tt http\+://www.\+codeproject.\+com/\+K\+B/recipes/\+J\+S\+O\+N\+\_\+\+Spirit.\+aspx} \hypertarget{rpcprotocol_8cpp_adfa1ef30dd1e00dcbecff15e1161e369}{}\index{rpcprotocol.\+cpp@{rpcprotocol.\+cpp}!Read\+H\+T\+T\+P\+Headers@{Read\+H\+T\+T\+P\+Headers}}
\index{Read\+H\+T\+T\+P\+Headers@{Read\+H\+T\+T\+P\+Headers}!rpcprotocol.\+cpp@{rpcprotocol.\+cpp}}
\subsubsection[{Read\+H\+T\+T\+P\+Headers}]{\setlength{\rightskip}{0pt plus 5cm}int Read\+H\+T\+T\+P\+Headers (
\begin{DoxyParamCaption}
\item[{std\+::basic\+\_\+istream$<$ char $>$ \&}]{stream, }
\item[{map$<$ string, string $>$ \&}]{map\+Headers\+Ret}
\end{DoxyParamCaption}
)}\label{rpcprotocol_8cpp_adfa1ef30dd1e00dcbecff15e1161e369}
\hypertarget{rpcprotocol_8cpp_a04ef20cccddfd1505806982c3c232325}{}\index{rpcprotocol.\+cpp@{rpcprotocol.\+cpp}!Read\+H\+T\+T\+P\+Message@{Read\+H\+T\+T\+P\+Message}}
\index{Read\+H\+T\+T\+P\+Message@{Read\+H\+T\+T\+P\+Message}!rpcprotocol.\+cpp@{rpcprotocol.\+cpp}}
\subsubsection[{Read\+H\+T\+T\+P\+Message}]{\setlength{\rightskip}{0pt plus 5cm}int Read\+H\+T\+T\+P\+Message (
\begin{DoxyParamCaption}
\item[{std\+::basic\+\_\+istream$<$ char $>$ \&}]{stream, }
\item[{map$<$ string, string $>$ \&}]{map\+Headers\+Ret, }
\item[{string \&}]{str\+Message\+Ret, }
\item[{int}]{n\+Proto, }
\item[{size\+\_\+t}]{max\+\_\+size}
\end{DoxyParamCaption}
)}\label{rpcprotocol_8cpp_a04ef20cccddfd1505806982c3c232325}
\hypertarget{rpcprotocol_8cpp_add578b3fb095706a7a78d265fa97d8d0}{}\index{rpcprotocol.\+cpp@{rpcprotocol.\+cpp}!Read\+H\+T\+T\+P\+Request\+Line@{Read\+H\+T\+T\+P\+Request\+Line}}
\index{Read\+H\+T\+T\+P\+Request\+Line@{Read\+H\+T\+T\+P\+Request\+Line}!rpcprotocol.\+cpp@{rpcprotocol.\+cpp}}
\subsubsection[{Read\+H\+T\+T\+P\+Request\+Line}]{\setlength{\rightskip}{0pt plus 5cm}bool Read\+H\+T\+T\+P\+Request\+Line (
\begin{DoxyParamCaption}
\item[{std\+::basic\+\_\+istream$<$ char $>$ \&}]{stream, }
\item[{int \&}]{proto, }
\item[{string \&}]{http\+\_\+method, }
\item[{string \&}]{http\+\_\+uri}
\end{DoxyParamCaption}
)}\label{rpcprotocol_8cpp_add578b3fb095706a7a78d265fa97d8d0}
\hypertarget{rpcprotocol_8cpp_af615c564cc7794d255e5adfacade4066}{}\index{rpcprotocol.\+cpp@{rpcprotocol.\+cpp}!Read\+H\+T\+T\+P\+Status@{Read\+H\+T\+T\+P\+Status}}
\index{Read\+H\+T\+T\+P\+Status@{Read\+H\+T\+T\+P\+Status}!rpcprotocol.\+cpp@{rpcprotocol.\+cpp}}
\subsubsection[{Read\+H\+T\+T\+P\+Status}]{\setlength{\rightskip}{0pt plus 5cm}int Read\+H\+T\+T\+P\+Status (
\begin{DoxyParamCaption}
\item[{std\+::basic\+\_\+istream$<$ char $>$ \&}]{stream, }
\item[{int \&}]{proto}
\end{DoxyParamCaption}
)}\label{rpcprotocol_8cpp_af615c564cc7794d255e5adfacade4066}


\subsection{Variable Documentation}
\hypertarget{rpcprotocol_8cpp_a86279189e9b67af153a80f6ca5ef5d1c}{}\index{rpcprotocol.\+cpp@{rpcprotocol.\+cpp}!P\+O\+S\+T\+\_\+\+R\+E\+A\+D\+\_\+\+S\+I\+Z\+E@{P\+O\+S\+T\+\_\+\+R\+E\+A\+D\+\_\+\+S\+I\+Z\+E}}
\index{P\+O\+S\+T\+\_\+\+R\+E\+A\+D\+\_\+\+S\+I\+Z\+E@{P\+O\+S\+T\+\_\+\+R\+E\+A\+D\+\_\+\+S\+I\+Z\+E}!rpcprotocol.\+cpp@{rpcprotocol.\+cpp}}
\subsubsection[{P\+O\+S\+T\+\_\+\+R\+E\+A\+D\+\_\+\+S\+I\+Z\+E}]{\setlength{\rightskip}{0pt plus 5cm}const size\+\_\+t P\+O\+S\+T\+\_\+\+R\+E\+A\+D\+\_\+\+S\+I\+Z\+E = 256 $\ast$ 1024}\label{rpcprotocol_8cpp_a86279189e9b67af153a80f6ca5ef5d1c}


Number of bytes to allocate and read at most at once in post data. 

