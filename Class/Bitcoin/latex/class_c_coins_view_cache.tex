\hypertarget{class_c_coins_view_cache}{}\section{C\+Coins\+View\+Cache Class Reference}
\label{class_c_coins_view_cache}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}


{\ttfamily \#include $<$coins.\+h$>$}

Inheritance diagram for C\+Coins\+View\+Cache\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_c_coins_view_cache}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_c_coins_view_cache_a515a6f259af607fb3394b560d9c063c9}{C\+Coins\+View\+Cache} (\hyperlink{class_c_coins_view}{C\+Coins\+View} $\ast$base\+In)
\item 
\hyperlink{class_c_coins_view_cache_a6148421cb7605fb434f6c8622f39430b}{$\sim$\+C\+Coins\+View\+Cache} ()
\item 
bool \hyperlink{class_c_coins_view_cache_a27ec8311ae409ea1e3c3484c1d4a9035}{Get\+Coins} (const \hyperlink{classuint256}{uint256} \&txid, \hyperlink{class_c_coins}{C\+Coins} \&coins) const 
\begin{DoxyCompactList}\small\item\em Retrieve the \hyperlink{class_c_coins}{C\+Coins} (unspent transaction outputs) for a given txid. \end{DoxyCompactList}\item 
bool \hyperlink{class_c_coins_view_cache_a25dddabe8734fc9823112763494da72b}{Have\+Coins} (const \hyperlink{classuint256}{uint256} \&txid) const 
\item 
\hyperlink{classuint256}{uint256} \hyperlink{class_c_coins_view_cache_aabcd1da9f28445e09c9af5f68ce7f100}{Get\+Best\+Block} () const 
\begin{DoxyCompactList}\small\item\em Retrieve the block hash whose state this \hyperlink{class_c_coins_view}{C\+Coins\+View} currently represents. \end{DoxyCompactList}\item 
void \hyperlink{class_c_coins_view_cache_aa3f787f77b123f0fd340fbe4e458b4ad}{Set\+Best\+Block} (const \hyperlink{classuint256}{uint256} \&\hyperlink{class_c_coins_view_cache_a229dddddbc5501edc250209a2ce5df8b}{hash\+Block})
\item 
bool \hyperlink{class_c_coins_view_cache_a561bb7c6c97701b12c48fbbb563d0a91}{Batch\+Write} (\hyperlink{coins_8h_a2886ba2fd0428bae777e1cbcabc02834}{C\+Coins\+Map} \&map\+Coins, const \hyperlink{classuint256}{uint256} \&\hyperlink{class_c_coins_view_cache_a229dddddbc5501edc250209a2ce5df8b}{hash\+Block})
\item 
const \hyperlink{class_c_coins}{C\+Coins} $\ast$ \hyperlink{class_c_coins_view_cache_a2b72aa925d9c1a1bd662f7e2852059d9}{Access\+Coins} (const \hyperlink{classuint256}{uint256} \&txid) const 
\item 
\hyperlink{class_c_coins_modifier}{C\+Coins\+Modifier} \hyperlink{class_c_coins_view_cache_ab67c0d489873ed735c4fc52aa66f0830}{Modify\+Coins} (const \hyperlink{classuint256}{uint256} \&txid)
\item 
bool \hyperlink{class_c_coins_view_cache_ac9888d4feaa46666d03871cd7cd1c01d}{Flush} ()
\item 
unsigned int \hyperlink{class_c_coins_view_cache_a5e8c37ab1b772d00b57e2b40256a4646}{Get\+Cache\+Size} () const 
\begin{DoxyCompactList}\small\item\em Calculate the size of the cache (in number of transactions) \end{DoxyCompactList}\item 
\hyperlink{amount_8h_a4eaf3a5239714d8c45b851527f7cb564}{C\+Amount} \hyperlink{class_c_coins_view_cache_a7fd5ad106e1ac2c2770005672421ff93}{Get\+Value\+In} (const C\+Transaction \&tx) const 
\item 
bool \hyperlink{class_c_coins_view_cache_a2b547a48709e9f9af9a4cfc77a328a3f}{Have\+Inputs} (const C\+Transaction \&tx) const 
\begin{DoxyCompactList}\small\item\em Check whether all prevouts of the transaction are present in the U\+T\+X\+O set represented by this view. \end{DoxyCompactList}\item 
double \hyperlink{class_c_coins_view_cache_a0ba6f2f115a73a91d3cfb8f59569099d}{Get\+Priority} (const C\+Transaction \&tx, int n\+Height) const 
\begin{DoxyCompactList}\small\item\em Return priority of tx at height n\+Height. \end{DoxyCompactList}\item 
const C\+Tx\+Out \& \hyperlink{class_c_coins_view_cache_aa441d7d3869be2f164af1c52a3acb56a}{Get\+Output\+For} (const C\+Tx\+In \&input) const 
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{class_c_coins_view_cache_a363e27234d36bb0fc533d60cd64d1bc3}{has\+Modifier}
\item 
\hyperlink{classuint256}{uint256} \hyperlink{class_c_coins_view_cache_a229dddddbc5501edc250209a2ce5df8b}{hash\+Block}
\item 
\hyperlink{coins_8h_a2886ba2fd0428bae777e1cbcabc02834}{C\+Coins\+Map} \hyperlink{class_c_coins_view_cache_af33cc2c6d38af65ac833d4d13c8e3764}{cache\+Coins}
\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{class_c_coins_view_cache_ae6ce8219acb79950bced74cb108acacf}{C\+Coins\+Modifier}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\hyperlink{class_c_coins_view}{C\+Coins\+View} that adds a memory cache for transactions to another \hyperlink{class_c_coins_view}{C\+Coins\+View} 

\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_c_coins_view_cache_a515a6f259af607fb3394b560d9c063c9}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{C\+Coins\+View\+Cache}]{\setlength{\rightskip}{0pt plus 5cm}C\+Coins\+View\+Cache\+::\+C\+Coins\+View\+Cache (
\begin{DoxyParamCaption}
\item[{{\bf C\+Coins\+View} $\ast$}]{base\+In}
\end{DoxyParamCaption}
)}\label{class_c_coins_view_cache_a515a6f259af607fb3394b560d9c063c9}
\hypertarget{class_c_coins_view_cache_a6148421cb7605fb434f6c8622f39430b}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!````~C\+Coins\+View\+Cache@{$\sim$\+C\+Coins\+View\+Cache}}
\index{````~C\+Coins\+View\+Cache@{$\sim$\+C\+Coins\+View\+Cache}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{$\sim$\+C\+Coins\+View\+Cache}]{\setlength{\rightskip}{0pt plus 5cm}C\+Coins\+View\+Cache\+::$\sim$\+C\+Coins\+View\+Cache (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{class_c_coins_view_cache_a6148421cb7605fb434f6c8622f39430b}


\subsection{Member Function Documentation}
\hypertarget{class_c_coins_view_cache_a2b72aa925d9c1a1bd662f7e2852059d9}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Access\+Coins@{Access\+Coins}}
\index{Access\+Coins@{Access\+Coins}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{Access\+Coins}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf C\+Coins} $\ast$ C\+Coins\+View\+Cache\+::\+Access\+Coins (
\begin{DoxyParamCaption}
\item[{const {\bf uint256} \&}]{txid}
\end{DoxyParamCaption}
) const}\label{class_c_coins_view_cache_a2b72aa925d9c1a1bd662f7e2852059d9}
Return a pointer to \hyperlink{class_c_coins}{C\+Coins} in the cache, or N\+U\+L\+L if not found. This is more efficient than Get\+Coins. Modifications to other cache entries are allowed while accessing the returned pointer. \hypertarget{class_c_coins_view_cache_a561bb7c6c97701b12c48fbbb563d0a91}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Batch\+Write@{Batch\+Write}}
\index{Batch\+Write@{Batch\+Write}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{Batch\+Write}]{\setlength{\rightskip}{0pt plus 5cm}bool C\+Coins\+View\+Cache\+::\+Batch\+Write (
\begin{DoxyParamCaption}
\item[{{\bf C\+Coins\+Map} \&}]{map\+Coins, }
\item[{const {\bf uint256} \&}]{hash\+Block}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\label{class_c_coins_view_cache_a561bb7c6c97701b12c48fbbb563d0a91}
Do a bulk modification (multiple \hyperlink{class_c_coins}{C\+Coins} changes + Best\+Block change). The passed map\+Coins can be modified. 

Reimplemented from \hyperlink{class_c_coins_view_backed_ace15da3934c9d7a9cb9c7a787f92f764}{C\+Coins\+View\+Backed}.

\hypertarget{class_c_coins_view_cache_ac9888d4feaa46666d03871cd7cd1c01d}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Flush@{Flush}}
\index{Flush@{Flush}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{Flush}]{\setlength{\rightskip}{0pt plus 5cm}bool C\+Coins\+View\+Cache\+::\+Flush (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{class_c_coins_view_cache_ac9888d4feaa46666d03871cd7cd1c01d}
Push the modifications applied to this cache to its base. Failure to call this method before destruction will cause the changes to be forgotten. If false is returned, the state of this cache (and its backing view) will be undefined. \hypertarget{class_c_coins_view_cache_aabcd1da9f28445e09c9af5f68ce7f100}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Get\+Best\+Block@{Get\+Best\+Block}}
\index{Get\+Best\+Block@{Get\+Best\+Block}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{Get\+Best\+Block}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint256} C\+Coins\+View\+Cache\+::\+Get\+Best\+Block (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\label{class_c_coins_view_cache_aabcd1da9f28445e09c9af5f68ce7f100}


Retrieve the block hash whose state this \hyperlink{class_c_coins_view}{C\+Coins\+View} currently represents. 



Reimplemented from \hyperlink{class_c_coins_view_backed_a8465dc4764fd5b01591b824551cbbfab}{C\+Coins\+View\+Backed}.

\hypertarget{class_c_coins_view_cache_a5e8c37ab1b772d00b57e2b40256a4646}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Get\+Cache\+Size@{Get\+Cache\+Size}}
\index{Get\+Cache\+Size@{Get\+Cache\+Size}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{Get\+Cache\+Size}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int C\+Coins\+View\+Cache\+::\+Get\+Cache\+Size (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}\label{class_c_coins_view_cache_a5e8c37ab1b772d00b57e2b40256a4646}


Calculate the size of the cache (in number of transactions) 

\hypertarget{class_c_coins_view_cache_a27ec8311ae409ea1e3c3484c1d4a9035}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Get\+Coins@{Get\+Coins}}
\index{Get\+Coins@{Get\+Coins}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{Get\+Coins}]{\setlength{\rightskip}{0pt plus 5cm}bool C\+Coins\+View\+Cache\+::\+Get\+Coins (
\begin{DoxyParamCaption}
\item[{const {\bf uint256} \&}]{txid, }
\item[{{\bf C\+Coins} \&}]{coins}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\label{class_c_coins_view_cache_a27ec8311ae409ea1e3c3484c1d4a9035}


Retrieve the \hyperlink{class_c_coins}{C\+Coins} (unspent transaction outputs) for a given txid. 



Reimplemented from \hyperlink{class_c_coins_view_backed_a21b95a9910f94e9b7ebed62a6f329ea0}{C\+Coins\+View\+Backed}.

\hypertarget{class_c_coins_view_cache_aa441d7d3869be2f164af1c52a3acb56a}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Get\+Output\+For@{Get\+Output\+For}}
\index{Get\+Output\+For@{Get\+Output\+For}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{Get\+Output\+For}]{\setlength{\rightskip}{0pt plus 5cm}const C\+Tx\+Out \& C\+Coins\+View\+Cache\+::\+Get\+Output\+For (
\begin{DoxyParamCaption}
\item[{const C\+Tx\+In \&}]{input}
\end{DoxyParamCaption}
) const}\label{class_c_coins_view_cache_aa441d7d3869be2f164af1c52a3acb56a}
\hypertarget{class_c_coins_view_cache_a0ba6f2f115a73a91d3cfb8f59569099d}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Get\+Priority@{Get\+Priority}}
\index{Get\+Priority@{Get\+Priority}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{Get\+Priority}]{\setlength{\rightskip}{0pt plus 5cm}double C\+Coins\+View\+Cache\+::\+Get\+Priority (
\begin{DoxyParamCaption}
\item[{const C\+Transaction \&}]{tx, }
\item[{int}]{n\+Height}
\end{DoxyParamCaption}
) const}\label{class_c_coins_view_cache_a0ba6f2f115a73a91d3cfb8f59569099d}


Return priority of tx at height n\+Height. 

\hypertarget{class_c_coins_view_cache_a7fd5ad106e1ac2c2770005672421ff93}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Get\+Value\+In@{Get\+Value\+In}}
\index{Get\+Value\+In@{Get\+Value\+In}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{Get\+Value\+In}]{\setlength{\rightskip}{0pt plus 5cm}{\bf C\+Amount} C\+Coins\+View\+Cache\+::\+Get\+Value\+In (
\begin{DoxyParamCaption}
\item[{const C\+Transaction \&}]{tx}
\end{DoxyParamCaption}
) const}\label{class_c_coins_view_cache_a7fd5ad106e1ac2c2770005672421ff93}
Amount of bitcoins coming in to a transaction Note that lightweight clients may not know anything besides the hash of previous transactions, so may not be able to calculate this.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em tx} & transaction for which we are checking input total \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Sum of value of all inputs (script\+Sigs) 
\end{DoxyReturn}
\hypertarget{class_c_coins_view_cache_a25dddabe8734fc9823112763494da72b}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Have\+Coins@{Have\+Coins}}
\index{Have\+Coins@{Have\+Coins}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{Have\+Coins}]{\setlength{\rightskip}{0pt plus 5cm}bool C\+Coins\+View\+Cache\+::\+Have\+Coins (
\begin{DoxyParamCaption}
\item[{const {\bf uint256} \&}]{txid}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}\label{class_c_coins_view_cache_a25dddabe8734fc9823112763494da72b}
Just check whether we have data for a given txid. This may (but cannot always) return true for fully spent transactions 

Reimplemented from \hyperlink{class_c_coins_view_backed_a6a769cf9cc55128dea8e1a2798056e71}{C\+Coins\+View\+Backed}.

\hypertarget{class_c_coins_view_cache_a2b547a48709e9f9af9a4cfc77a328a3f}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Have\+Inputs@{Have\+Inputs}}
\index{Have\+Inputs@{Have\+Inputs}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{Have\+Inputs}]{\setlength{\rightskip}{0pt plus 5cm}bool C\+Coins\+View\+Cache\+::\+Have\+Inputs (
\begin{DoxyParamCaption}
\item[{const C\+Transaction \&}]{tx}
\end{DoxyParamCaption}
) const}\label{class_c_coins_view_cache_a2b547a48709e9f9af9a4cfc77a328a3f}


Check whether all prevouts of the transaction are present in the U\+T\+X\+O set represented by this view. 

\hypertarget{class_c_coins_view_cache_ab67c0d489873ed735c4fc52aa66f0830}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Modify\+Coins@{Modify\+Coins}}
\index{Modify\+Coins@{Modify\+Coins}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{Modify\+Coins}]{\setlength{\rightskip}{0pt plus 5cm}{\bf C\+Coins\+Modifier} C\+Coins\+View\+Cache\+::\+Modify\+Coins (
\begin{DoxyParamCaption}
\item[{const {\bf uint256} \&}]{txid}
\end{DoxyParamCaption}
)}\label{class_c_coins_view_cache_ab67c0d489873ed735c4fc52aa66f0830}
Return a modifiable reference to a \hyperlink{class_c_coins}{C\+Coins}. If no entry with the given txid exists, a new one is created. Simultaneous modifications are not allowed. \hypertarget{class_c_coins_view_cache_aa3f787f77b123f0fd340fbe4e458b4ad}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!Set\+Best\+Block@{Set\+Best\+Block}}
\index{Set\+Best\+Block@{Set\+Best\+Block}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{Set\+Best\+Block}]{\setlength{\rightskip}{0pt plus 5cm}void C\+Coins\+View\+Cache\+::\+Set\+Best\+Block (
\begin{DoxyParamCaption}
\item[{const {\bf uint256} \&}]{hash\+Block}
\end{DoxyParamCaption}
)}\label{class_c_coins_view_cache_aa3f787f77b123f0fd340fbe4e458b4ad}


\subsection{Friends And Related Function Documentation}
\hypertarget{class_c_coins_view_cache_ae6ce8219acb79950bced74cb108acacf}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!C\+Coins\+Modifier@{C\+Coins\+Modifier}}
\index{C\+Coins\+Modifier@{C\+Coins\+Modifier}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{C\+Coins\+Modifier}]{\setlength{\rightskip}{0pt plus 5cm}friend class {\bf C\+Coins\+Modifier}\hspace{0.3cm}{\ttfamily [friend]}}\label{class_c_coins_view_cache_ae6ce8219acb79950bced74cb108acacf}


\subsection{Member Data Documentation}
\hypertarget{class_c_coins_view_cache_af33cc2c6d38af65ac833d4d13c8e3764}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!cache\+Coins@{cache\+Coins}}
\index{cache\+Coins@{cache\+Coins}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{cache\+Coins}]{\setlength{\rightskip}{0pt plus 5cm}{\bf C\+Coins\+Map} C\+Coins\+View\+Cache\+::cache\+Coins\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [protected]}}\label{class_c_coins_view_cache_af33cc2c6d38af65ac833d4d13c8e3764}
\hypertarget{class_c_coins_view_cache_a229dddddbc5501edc250209a2ce5df8b}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!hash\+Block@{hash\+Block}}
\index{hash\+Block@{hash\+Block}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{hash\+Block}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint256} C\+Coins\+View\+Cache\+::hash\+Block\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [protected]}}\label{class_c_coins_view_cache_a229dddddbc5501edc250209a2ce5df8b}
Make mutable so that we can \char`\"{}fill the cache\char`\"{} even from Get-\/methods declared as \char`\"{}const\char`\"{}. \hypertarget{class_c_coins_view_cache_a363e27234d36bb0fc533d60cd64d1bc3}{}\index{C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}!has\+Modifier@{has\+Modifier}}
\index{has\+Modifier@{has\+Modifier}!C\+Coins\+View\+Cache@{C\+Coins\+View\+Cache}}
\subsubsection[{has\+Modifier}]{\setlength{\rightskip}{0pt plus 5cm}bool C\+Coins\+View\+Cache\+::has\+Modifier\hspace{0.3cm}{\ttfamily [protected]}}\label{class_c_coins_view_cache_a363e27234d36bb0fc533d60cd64d1bc3}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
C\+:/\+Users/\+Joe/\+Documents/\+School/\+C\+S\+C17\+A/bitcoin/src/\hyperlink{coins_8h}{coins.\+h}\item 
C\+:/\+Users/\+Joe/\+Documents/\+School/\+C\+S\+C17\+A/bitcoin/src/\hyperlink{coins_8cpp}{coins.\+cpp}\end{DoxyCompactItemize}
